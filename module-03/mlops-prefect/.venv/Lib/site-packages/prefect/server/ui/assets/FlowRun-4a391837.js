import{d as F,r as h,c as o,o as n,j as U,M as y,k as m,u as e,_ as V,$ as R,a0 as $,m as j,v as z,a as E,a1 as G,a2 as O,b as M,a3 as Y,a4 as Z,a5 as q,g as s,w as t,h as b,E as H,a6 as J,i as u,a7 as K,a8 as Q,a9 as W,aa as X,ab as ee,ac as ae,ad as le,z as ne,Y as se}from"./index-90a34f95.js";import{u as te}from"./usePageTitle-0cc457c9.js";const oe={class:"flow-run-graphs__panel-content"},ue=F({__name:"FlowRunGraphs",props:{flowRun:null},setup(k){const i=h(!1),c=h(null),p=h(!1),d=o(()=>({root:{"flow-run-graphs--fullscreen":i.value},graph:{"flow-run-graphs__graphs--panel-open":p.value},panel:{"flow-run-graphs__panel-container--panel-open":p.value}}));function a(f){c.value=f,p.value=!!f}function v(){p.value=!1}return(f,r)=>(n(),U("div",{class:R(["flow-run-graphs",e(d).root])},[y("div",{class:R(["flow-run-graphs__graphs",e(d).graph])},[m(e(V),{class:"flow-run-graphs__timeline","flow-run":k.flowRun,height:"340px","selected-node":c.value,onSelection:a,"onUpdate:fullscreen":r[0]||(r[0]=g=>i.value=g)},null,8,["flow-run","selected-node"])],2),y("div",{class:R(["flow-run-graphs__panel-container",e(d).panel])},[y("div",oe,[m(e($),{"selected-node":c.value,floating:i.value,onDismiss:v},null,8,["selected-node","floating"])])],2)],2))}});const pe=F({__name:"FlowRun",setup(k){const i=H(),c=j("flowRunId"),p=z(),d=E(p.flowRuns.getFlowRun,[c],{interval:5e3}),a=o(()=>d.response),v=o(()=>{var l;return(l=a.value)==null?void 0:l.deploymentId}),{deployment:f}=G(v),r=o(()=>{var l;return(l=a.value)!=null&&l.stateType?O(a.value.stateType):!0}),g=o(()=>[{label:"Logs"},{label:"Task Runs",hidden:r.value},{label:"Subflow Runs",hidden:r.value},{label:"Results",hidden:r.value},{label:"Artifacts",hidden:r.value},{label:"Details"},{label:"Parameters"}]),{tab:_,tabs:T}=M(g,"Logs");Y(c,(l,w)=>{l!==w&&(_.value="Logs")});const C=o(()=>{var l;return((l=a.value)==null?void 0:l.parameters)??{}}),S=o(()=>{var l;return((l=f.value)==null?void 0:l.parameterOpenApiSchema)??{}}),x=o(()=>Z(C.value,S.value));function D(){i.push(se.flowRuns())}const N=o(()=>{var l;return(l=a.value)==null?void 0:l.stateType});q(N);const P=o(()=>a.value?`Flow Run: ${a.value.name}`:"Flow Run");return te(P),(l,w)=>{const B=b("p-code-highlight"),I=b("p-tabs"),A=b("p-layout-default");return n(),s(A,{class:"flow-run"},{header:t(()=>[e(a)?(n(),s(e(J),{key:0,"flow-run-id":e(a).id,onDelete:D},null,8,["flow-run-id"])):u("",!0)]),default:t(()=>[e(a)&&!e(r)?(n(),s(ue,{key:0,"flow-run":e(a)},null,8,["flow-run"])):u("",!0),m(I,{selected:e(_),"onUpdate:selected":w[0]||(w[0]=L=>ne(_)?_.value=L:null),tabs:e(T)},{details:t(()=>[e(a)?(n(),s(e(K),{key:0,"flow-run":e(a)},null,8,["flow-run"])):u("",!0)]),logs:t(()=>[e(a)?(n(),s(e(Q),{key:0,"flow-run":e(a)},null,8,["flow-run"])):u("",!0)]),results:t(()=>[e(a)?(n(),s(e(W),{key:0,"flow-run":e(a)},null,8,["flow-run"])):u("",!0)]),artifacts:t(()=>[e(a)?(n(),s(e(X),{key:0,"flow-run":e(a)},null,8,["flow-run"])):u("",!0)]),"task-runs":t(()=>[e(a)?(n(),s(e(ee),{key:0,"flow-run-id":e(a).id},null,8,["flow-run-id"])):u("",!0)]),"subflow-runs":t(()=>[e(a)?(n(),s(e(ae),{key:0,"flow-run-id":e(a).id},null,8,["flow-run-id"])):u("",!0)]),parameters:t(()=>[e(a)?(n(),s(e(le),{key:0,"text-to-copy":e(x)},{default:t(()=>[m(B,{lang:"json",text:e(x),class:"flow-run__parameters"},null,8,["text"])]),_:1},8,["text-to-copy"])):u("",!0)]),_:1},8,["selected","tabs"])]),_:1})}}});export{pe as default};
